<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Privacy-first Mounjaro medication and health tracking application">
    <meta name="theme-color" content="#10b981">
    <title>Mounjaro Tracker - Medication & Health Log</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/mobile.css">
    
    <!-- Progressive Web App meta tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Mounjaro Tracker">
    
    <!-- iOS specific icons -->
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180x180.png">
    
    <!-- Standard favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16x16.png">
    
    <!-- PWA meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Mounjaro Tracker">
    <meta name="msapplication-TileColor" content="#10b981">
    <meta name="msapplication-TileImage" content="icons/icon-144x144.png">
</head>
<body>
    <!-- Main App Container -->
    <div class="app-container">
        <!-- Header Navigation -->
        <header class="app-header">
            <div class="header-content">
                <div>
                    <h1 class="app-title">
                        <span class="app-icon">ðŸ’Š</span>
                        Mounjaro Tracker
                    </h1>
                    <p class="app-subtitle">Track your weekly medication and daily progress</p>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="content-section">
                <!-- Tab Navigation -->
                <nav class="tab-navigation" role="tablist">
                    <button class="tab-button active" role="tab" aria-selected="true" aria-controls="daily" id="tab-daily">
                        Daily Check-in
                    </button>
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="import" id="tab-import">
                        Import
                    </button>
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="history" id="tab-history">
                        History
                    </button>
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="stats" id="tab-stats">
                        Stats
                    </button>
                </nav>

                <!-- Daily Check-in Tab -->
                <section id="daily" class="tab-content active" role="tabpanel" aria-labelledby="tab-daily">
                    <div id="dailyMessages" aria-live="polite"></div>
                    <div id="daysSinceLastDose"></div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Daily Check-in</h2>
                        </div>
                        
                        <form id="dailyForm">
                            <div class="form-group">
                                <label for="dailyDate">Date & Time</label>
                                <input type="datetime-local" id="dailyDate" required aria-describedby="dailyDate-help">
                                <small id="dailyDate-help" class="form-text">When did you record this check-in?</small>
                            </div>

                            <div class="form-group">
                                <label for="dailyWeight">Weight (optional)</label>
                                <input type="number" id="dailyWeight" step="0.1" placeholder="Enter weight in kg or lbs" aria-describedby="dailyWeight-help">
                                <small id="dailyWeight-help" class="form-text">Track your progress over time</small>
                            </div>

                            <!-- Medication Checkbox -->
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <input type="checkbox" id="includeMedication" class="medication-checkbox">
                                    <label for="includeMedication" class="checkbox-label">
                                        ðŸ’Š I took my Mounjaro dose today
                                    </label>
                                </div>
                            </div>

                            <!-- Medication Fields (hidden by default) -->
                            <div id="medicationFields" class="medication-fields" style="display: none;">
                                <div class="form-group">
                                    <label for="dose">Mounjaro Dose</label>
                                    <select id="dose" aria-describedby="dose-help">
                                        <option value="">Select dose</option>
                                        <option value="2.5mg">2.5mg</option>
                                        <option value="5mg">5mg</option>
                                        <option value="7.5mg">7.5mg</option>
                                        <option value="10mg">10mg</option>
                                        <option value="12.5mg">12.5mg</option>
                                        <option value="15mg">15mg</option>
                                    </select>
                                    <small id="dose-help" class="form-text">Select your prescribed dose</small>
                                </div>

                                <div class="form-group">
                                    <label for="medicationNotes">Medication Notes (optional)</label>
                                    <textarea id="medicationNotes" placeholder="Injection site, how you felt after taking it, any immediate observations..." aria-describedby="medicationNotes-help"></textarea>
                                    <small id="medicationNotes-help" class="form-text">Notes specific to today's medication dose</small>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="dailyNotes">How are you feeling today? Any symptoms or observations?</label>
                                <textarea id="dailyNotes" placeholder="Energy levels, appetite changes, side effects, mood, sleep quality, etc..." aria-describedby="dailyNotes-help"></textarea>
                                <small id="dailyNotes-help" class="form-text">General daily observations and how you're feeling overall</small>
                            </div>

                            <button type="submit" class="btn btn-primary" id="dailySubmitBtn">
                                ðŸ“Š Log Daily Check-in
                            </button>
                        </form>
                    </div>
                </section>


                <!-- Import Tab -->
                <section id="import" class="tab-content" role="tabpanel" aria-labelledby="tab-import">
                    <div id="importMessages" aria-live="polite"></div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Import Data</h2>
                        </div>
                        
                        <!-- Import Method Selection -->
                        <div class="tab-navigation" style="margin-bottom: 20px;">
                            <button class="tab-button active" data-method="text">Text Import</button>
                            <button class="tab-button" data-method="json">JSON Import</button>
                        </div>
                        
                        <!-- Text Import Section -->
                        <div id="textImport" class="import-method active">
                            <div class="form-group">
                                <label for="importData">Paste your manual data here:</label>
                                <textarea id="importData" placeholder="04/07 - 141.5 kg
- mounjaro 5mg

05/07 - 141.6 kg
- dia com cÃ³licas, final do dia e noite com diarreia

06/07 - 140.1 kg
- teve mais cÃ³licas e gases, um tanto mais de diarreia" style="height: 200px;"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="importYear">Year (since dates don't include year):</label>
                                <select id="importYear" required>
                                    <option value="2024">2024</option>
                                    <option value="2025" selected>2025</option>
                                </select>
                            </div>
                            
                            <button class="btn btn-primary" id="parseTextBtn">Parse and Preview</button>
                        </div>
                        
                        <!-- JSON Import Section -->
                        <div id="jsonImport" class="import-method">
                            <div class="form-group">
                                <label for="jsonFileInput">Select exported JSON file:</label>
                                <input type="file" id="jsonFileInput" accept=".json,application/json" style="width: 100%; padding: 15px; border: 2px solid var(--border-color); border-radius: var(--radius-lg); font-size: 16px; margin-bottom: 10px;">
                            </div>
                            
                            <div class="form-group">
                                <label for="jsonTextInput">Or paste JSON data:</label>
                                <textarea id="jsonTextInput" placeholder='[
  {
    "id": 1640995200000,
    "type": "medication",
    "date": "2025-01-01T12:00",
    "dose": "5mg",
    "weight": "141.5",
    "notes": "First dose of the month"
  },
  {
    "id": 1641081600000,
    "type": "daily",
    "date": "2025-01-02T12:00",
    "weight": "141.2",
    "notes": "Feeling good today"
  }
]' style="height: 200px; font-family: monospace; font-size: 14px;"></textarea>
                            </div>
                            
                            <button class="btn btn-primary" id="parseJsonBtn">Load and Preview JSON</button>
                        </div>
                        
                        <div id="importPreview"></div>
                    </div>
                </section>

                <!-- History Tab -->
                <section id="history" class="tab-content" role="tabpanel" aria-labelledby="tab-history">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Entry History</h2>
                        </div>
                        <div id="entriesList"></div>
                    </div>
                </section>

                <!-- Stats Tab -->
                <section id="stats" class="tab-content" role="tabpanel" aria-labelledby="tab-stats">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Statistics & Progress</h2>
                        </div>
                        <div id="statsContent"></div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/import.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
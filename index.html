<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Privacy-first Mounjaro medication and health tracking application"
    />
    <meta name="theme-color" content="#10b981" />
    <title>Mounjaro Tracker - Medication & Health Log</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/mobile.css" />

    <!-- Progressive Web App meta tags -->
    <link rel="manifest" href="manifest.json" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Mounjaro Tracker" />

    <!-- iOS specific icons -->
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="icons/icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="icons/icon-180x180.png"
    />

    <!-- Standard favicon -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="icons/icon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="icons/icon-16x16.png"
    />

    <!-- PWA meta tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Mounjaro Tracker" />
    <meta name="msapplication-TileColor" content="#10b981" />
    <meta name="msapplication-TileImage" content="icons/icon-144x144.png" />
  </head>
  <body>
    <!-- Main App Container -->
    <div class="app-container">
      <!-- Header Navigation -->
      <header class="app-header">
        <div class="header-content">
          <div>
            <h1 class="app-title">
              <span data-icon="logo" data-size="24" class="app-icon"></span>
              Mounjaro Tracker
            </h1>
            <p class="app-subtitle">
              Track your weekly medication and daily progress
            </p>
          </div>
        </div>
      </header>

      <!-- Main Content Area -->
      <main class="main-content">
        <div class="content-section">
          <!-- Tab Navigation -->
          <nav class="tab-navigation" role="tablist">
            <button
              class="tab-button active"
              role="tab"
              aria-selected="true"
              aria-controls="daily"
              id="tab-daily"
            >
              <span data-icon="daily" data-size="25" class="tab-icon"></span>
              <span>Daily Check-in</span>
            </button>
            <button
              class="tab-button"
              role="tab"
              aria-selected="false"
              aria-controls="import"
              id="tab-import"
            >
              <span data-icon="import" data-size="25" class="tab-icon"></span>
              <span>Import</span>
            </button>
            <button
              class="tab-button"
              role="tab"
              aria-selected="false"
              aria-controls="history"
              id="tab-history"
            >
              <span data-icon="history" data-size="25" class="tab-icon"></span>
              <span>History</span>
            </button>
            <button
              class="tab-button"
              role="tab"
              aria-selected="false"
              aria-controls="stats"
              id="tab-stats"
            >
              <span data-icon="stats" data-size="25" class="tab-icon"></span>
              <span>Stats</span>
            </button>
          </nav>

          <!-- Daily Check-in Tab -->
          <section
            id="daily"
            class="tab-content active"
            role="tabpanel"
            aria-labelledby="tab-daily"
          >
            <div id="dailyMessages" aria-live="polite"></div>
            <div id="daysSinceLastDose"></div>

            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Daily Check-in</h2>
              </div>

              <form id="dailyForm">
                <div class="form-group">
                  <label for="dailyDate">Date & Time</label>
                  <input
                    type="datetime-local"
                    id="dailyDate"
                    required
                    aria-describedby="dailyDate-help"
                  />
                  <small id="dailyDate-help" class="form-text"
                    >When did you record this check-in?</small
                  >
                </div>

                <div class="form-group">
                  <label for="dailyWeight">Weight (optional)</label>
                  <input
                    type="number"
                    id="dailyWeight"
                    step="0.1"
                    placeholder="Enter weight in kg or lbs"
                    aria-describedby="dailyWeight-help"
                  />
                  <small id="dailyWeight-help" class="form-text"
                    >Track your progress over time</small
                  >
                </div>

                <!-- Medication Checkbox -->
                <div class="form-group">
                  <div class="checkbox-group">
                    <input
                      type="checkbox"
                      id="includeMedication"
                      class="medication-checkbox"
                    />
                    <label for="includeMedication" class="checkbox-label">
                      <span
                        data-icon="medication"
                        data-size="30"
                        class="checkbox-icon"
                      ></span>
                      I took my Mounjaro dose today
                    </label>
                  </div>
                </div>

                <!-- Medication Fields (hidden by default) -->
                <div
                  id="medicationFields"
                  class="medication-fields"
                  style="display: none"
                >
                  <div class="form-group">
                    <label for="dose">Mounjaro Dose</label>
                    <select id="dose" aria-describedby="dose-help">
                      <option value="">Select dose</option>
                      <option value="2.5mg">2.5mg</option>
                      <option value="5mg">5mg</option>
                      <option value="7.5mg">7.5mg</option>
                      <option value="10mg">10mg</option>
                      <option value="12.5mg">12.5mg</option>
                      <option value="15mg">15mg</option>
                    </select>
                    <small id="dose-help" class="form-text"
                      >Select your prescribed dose</small
                    >
                  </div>

                  <div class="form-group">
                    <label for="medicationNotes"
                      >Medication Notes (optional)</label
                    >
                    <textarea
                      id="medicationNotes"
                      placeholder="Injection site, how you felt after taking it, any immediate observations..."
                      aria-describedby="medicationNotes-help"
                    ></textarea>
                    <small id="medicationNotes-help" class="form-text"
                      >Notes specific to today's medication dose</small
                    >
                  </div>
                </div>

                <div class="form-group">
                  <label for="dailyNotes"
                    >How are you feeling today? Any symptoms or
                    observations?</label
                  >
                  <textarea
                    id="dailyNotes"
                    placeholder="Energy levels, appetite changes, side effects, mood, sleep quality, etc..."
                    aria-describedby="dailyNotes-help"
                  ></textarea>
                  <small id="dailyNotes-help" class="form-text"
                    >General daily observations and how you're feeling
                    overall</small
                  >
                </div>

                <button
                  type="submit"
                  class="btn btn-primary"
                  id="dailySubmitBtn"
                >
                  <span
                    data-icon="check"
                    data-size="34"
                    class="btn-icon"
                  ></span>
                  Log Daily Check-in
                </button>
              </form>
            </div>
          </section>

          <!-- Import Tab -->
          <section
            id="import"
            class="tab-content"
            role="tabpanel"
            aria-labelledby="tab-import"
          >
            <div id="importMessages" aria-live="polite"></div>

            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Import Data</h2>
              </div>

              <!-- Import Method Selection -->
              <div class="tab-navigation" style="margin-bottom: 20px">
                <button class="tab-button active" data-method="text">
                  Text Import
                </button>
                <button class="tab-button" data-method="json">
                  JSON Import
                </button>
              </div>

              <!-- Text Import Section -->
              <div id="textImport" class="import-method active">
                <div class="form-group">
                  <label for="importData">Paste your manual data here:</label>
                  <textarea
                    id="importData"
                    placeholder="04/07 - 141.5 kg
- mounjaro 5mg

05/07 - 141.6 kg
- dia com cólicas, final do dia e noite com diarreia

06/07 - 140.1 kg
- teve mais cólicas e gases, um tanto mais de diarreia"
                    style="height: 200px"
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="importYear"
                    >Year (since dates don't include year):</label
                  >
                  <select id="importYear" required>
                    <option value="2024">2024</option>
                    <option value="2025" selected>2025</option>
                  </select>
                </div>

                <button class="btn btn-primary" id="parseTextBtn">
                  Parse and Preview
                </button>
              </div>

              <!-- JSON Import Section -->
              <div id="jsonImport" class="import-method">
                <div class="form-group">
                  <label for="jsonFileInput">Select exported JSON file:</label>
                  <input
                    type="file"
                    id="jsonFileInput"
                    accept=".json,application/json"
                    style="
                      width: 100%;
                      padding: 15px;
                      border: 2px solid var(--border-color);
                      border-radius: var(--radius-lg);
                      font-size: 16px;
                      margin-bottom: 10px;
                    "
                  />
                </div>

                <div class="form-group">
                  <label for="jsonTextInput">Or paste JSON data:</label>
                  <textarea
                    id="jsonTextInput"
                    placeholder='[
  {
    "id": 1640995200000,
    "type": "medication",
    "date": "2025-01-01T12:00",
    "dose": "5mg",
    "weight": "141.5",
    "notes": "First dose of the month"
  },
  {
    "id": 1641081600000,
    "type": "daily",
    "date": "2025-01-02T12:00",
    "weight": "141.2",
    "notes": "Feeling good today"
  }
]'
                    style="
                      height: 200px;
                      font-family: monospace;
                      font-size: 14px;
                    "
                  ></textarea>
                </div>

                <button class="btn btn-primary" id="parseJsonBtn">
                  Load and Preview JSON
                </button>
              </div>

              <div id="importPreview"></div>
            </div>
          </section>

          <!-- History Tab -->
          <section
            id="history"
            class="tab-content"
            role="tabpanel"
            aria-labelledby="tab-history"
          >
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Entry History</h2>
              </div>
              <div id="entriesList"></div>
            </div>
          </section>

          <!-- Stats Tab -->
          <section
            id="stats"
            class="tab-content"
            role="tabpanel"
            aria-labelledby="tab-stats"
          >
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">Statistics & Progress</h2>
              </div>
              <div id="statsContent"></div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- SVG Icon Sprite -->
    <div style="position: absolute; width: 0; height: 0; overflow: hidden">
      <svg xmlns="http://www.w3.org/2000/svg">
        <defs>
          <!-- Daily Check-in Icon -->
          <symbol id="icon-logo" viewBox="0 0 100 100">
            <!-- Main logo background -->
            <rect x="10" y="10" width="80" height="80" rx="12" fill="#059669" />

            <!-- Medical cross -->
            <rect x="45" y="25" width="10" height="30" rx="2" fill="white" />
            <rect x="35" y="35" width="30" height="10" rx="2" fill="white" />

            <!-- MT Letters (smaller, positioned below cross) -->
            <text
              x="50"
              y="72"
              text-anchor="middle"
              font-family="system-ui, sans-serif"
              font-size="16"
              font-weight="700"
              fill="white"
            >
              MT
            </text>

            <!-- Small tracking dots (representing data points) -->
            <circle cx="25" cy="80" r="2" fill="white" opacity="0.6" />
            <circle cx="35" cy="75" r="2" fill="white" opacity="0.7" />
            <circle cx="45" cy="78" r="2" fill="white" opacity="0.5" />
            <circle cx="55" cy="82" r="2" fill="white" opacity="0.8" />
            <circle cx="65" cy="77" r="2" fill="white" opacity="0.6" />
            <circle cx="75" cy="80" r="2" fill="white" opacity="0.7" />
          </symbol>
          <!-- Daily Check-in Icon -->
          <symbol id="icon-daily" viewBox="0 0 80 80">
            <rect
              x="15"
              y="20"
              width="50"
              height="50"
              rx="6"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <rect
              x="25"
              y="30"
              width="30"
              height="4"
              rx="2"
              fill="currentColor"
            />
            <rect
              x="25"
              y="38"
              width="20"
              height="2"
              rx="1"
              fill="currentColor"
              opacity="0.6"
            />
            <rect
              x="25"
              y="42"
              width="25"
              height="2"
              rx="1"
              fill="currentColor"
              opacity="0.6"
            />
            <rect
              x="25"
              y="46"
              width="15"
              height="2"
              rx="1"
              fill="currentColor"
              opacity="0.6"
            />
            <circle
              cx="55"
              cy="50"
              r="8"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <polyline
              points="51,50 54,53 59,47"
              stroke="currentColor"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </symbol>

          <!-- Medication/Pill Icon -->
          <symbol id="icon-medication" viewBox="0 0 80 80">
            <ellipse
              cx="40"
              cy="40"
              rx="20"
              ry="12"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <line
              x1="20"
              y1="40"
              x2="60"
              y2="40"
              stroke="currentColor"
              stroke-width="2"
            />
            <circle cx="30" cy="35" r="2" fill="currentColor" />
            <circle cx="30" cy="45" r="2" fill="currentColor" />
            <circle cx="50" cy="35" r="2" fill="currentColor" />
            <circle cx="50" cy="45" r="2" fill="currentColor" />
          </symbol>

          <!-- Import Icon -->
          <symbol id="icon-import" viewBox="0 0 80 80">
            <rect
              x="20"
              y="20"
              width="40"
              height="50"
              rx="4"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <line
              x1="30"
              y1="30"
              x2="50"
              y2="30"
              stroke="currentColor"
              stroke-width="1"
            />
            <line
              x1="30"
              y1="35"
              x2="45"
              y2="35"
              stroke="currentColor"
              stroke-width="1"
            />
            <line
              x1="30"
              y1="40"
              x2="50"
              y2="40"
              stroke="currentColor"
              stroke-width="1"
            />
            <polyline
              points="40,55 45,50 40,45"
              stroke="currentColor"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <line
              x1="25"
              y1="50"
              x2="45"
              y2="50"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
          </symbol>

          <!-- History Icon -->
          <symbol id="icon-history" viewBox="0 0 80 80">
            <circle
              cx="40"
              cy="40"
              r="25"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <polyline
              points="40,20 40,40 55,50"
              stroke="currentColor"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <circle cx="40" cy="40" r="2" fill="currentColor" />
          </symbol>

          <!-- Statistics/Charts Icon -->
          <symbol id="icon-stats" viewBox="0 0 80 80">
            <rect
              x="15"
              y="15"
              width="50"
              height="50"
              rx="6"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <polyline
              points="25,50 35,40 45,45 55,30"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <circle cx="25" cy="50" r="2" fill="currentColor" />
            <circle cx="35" cy="40" r="2" fill="currentColor" />
            <circle cx="45" cy="45" r="2" fill="currentColor" />
            <circle cx="55" cy="30" r="2" fill="currentColor" />
            <rect
              x="50"
              y="55"
              width="8"
              height="5"
              rx="1"
              fill="currentColor"
              opacity="0.3"
            />
          </symbol>

          <!-- Delete/Trash Icon -->
          <symbol id="icon-delete" viewBox="0 0 80 80">
            <rect
              x="25"
              y="25"
              width="30"
              height="35"
              rx="3"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <line
              x1="20"
              y1="25"
              x2="60"
              y2="25"
              stroke="currentColor"
              stroke-width="2"
            />
            <line
              x1="35"
              y1="20"
              x2="45"
              y2="20"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
            <line
              x1="35"
              y1="35"
              x2="35"
              y2="50"
              stroke="currentColor"
              stroke-width="1.5"
            />
            <line
              x1="40"
              y1="35"
              x2="40"
              y2="50"
              stroke="currentColor"
              stroke-width="1.5"
            />
            <line
              x1="45"
              y1="35"
              x2="45"
              y2="50"
              stroke="currentColor"
              stroke-width="1.5"
            />
          </symbol>

          <!-- Export Icon -->
          <symbol id="icon-export" viewBox="0 0 80 80">
            <rect
              x="20"
              y="30"
              width="40"
              height="40"
              rx="4"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <polyline
              points="40,15 40,45"
              stroke="currentColor"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
            />
            <polyline
              points="30,25 40,15 50,25"
              stroke="currentColor"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <line
              x1="30"
              y1="50"
              x2="50"
              y2="50"
              stroke="currentColor"
              stroke-width="1"
            />
            <line
              x1="30"
              y1="55"
              x2="45"
              y2="55"
              stroke="currentColor"
              stroke-width="1"
            />
          </symbol>

          <!-- Check/Success Icon -->
          <symbol id="icon-check" viewBox="0 0 80 80">
            <circle
              cx="40"
              cy="40"
              r="25"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            />
            <polyline
              points="28,40 36,48 52,32"
              stroke="currentColor"
              stroke-width="3"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </symbol>
        </defs>
      </svg>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/import.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
